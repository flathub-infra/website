"""add runtime not eol guideline

Revision ID: b664044af9f3
Revises: c09abef8352e
Create Date: 2025-08-28 21:06:49.768501

"""

import datetime
from alembic import op
import sqlalchemy as sa

from app.models import Guideline

# revision identifiers, used by Alembic.
revision = 'b664044af9f3'
down_revision = 'c09abef8352e'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.bulk_insert(
        sa.table(
            "guideline",
            sa.Column("id", sa.String(), nullable=False),
            sa.Column("url", sa.String(), nullable=False),
            sa.Column("needed_to_pass_since", sa.Date(), nullable=False),
            sa.Column("read_only", sa.Boolean(), nullable=False),
            sa.Column("guideline_category_id", sa.String(), nullable=False),
            sa.Column("show_on_fullscreen_app", sa.Boolean(), nullable=False),
            sa.Column("order", sa.Integer(), nullable=False),
        ),
        [
            {
                "id": "general-runtime-not-eol",
                "url": "https://docs.flathub.org/docs/for-app-authors/appdata-guidelines/quality-guidelines/#runtime-not-end-of-life",
                "needed_to_pass_since": datetime.datetime(2025, 9, 1),
                "read_only": True,
                "guideline_category_id": "general",
                "show_on_fullscreen_app": True,
                "order": 10,
            },
        ],
    )
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.execute(
        sa.delete(sa.table("guideline", sa.Column("id", sa.String()))).where(
            sa.column("id") == "general-runtime-not-eol"
        )
    )
    # ### end Alembic commands ###
