import { defineConfig } from "orval"

export default defineConfig({
  "flathub-file-transfomer": {
    output: {
      mode: "tags-split",
      workspace: "./src/codegen",
      target: "./",
      schemas: "./model",
      client: "react-query",
      httpClient: "axios",
      mock: true,
      prettier: true,
      clean: true,
      baseUrl: "",
      override: {
        paramsSerializerOptions: {
          qs: {
            arrayFormat: "repeat",
          },
        },
        header: (info): string[] => [
          `Generated by orval üç∫`,
          `Do not edit manually.`,
          ...(info.title ? [info.title] : []),
          ...(info.description ? [info.description] : []),
          ...(info.version ? [`OpenAPI spec version: ${info.version}`] : []),
        ],
        aliasCombinedTypes: true,
      },
    },
    input: {
      target: "http://localhost:8000/openapi.json",
    },
  },
  "flathub-pipeline-file-transfomer": {
    output: {
      mode: "tags-split",
      workspace: "./src/codegen-pipeline",
      target: "./",
      schemas: "./model",
      client: "react-query",
      httpClient: "axios",
      mock: true,
      prettier: true,
      clean: true,
      baseUrl: "https://builds.flathub.org",
      override: {
        header: (info): string[] => [
          `Generated by orval üç∫`,
          `Do not edit manually.`,
          ...(info.title ? [info.title] : []),
          ...(info.description ? [info.description] : []),
          ...(info.version ? [`OpenAPI spec version: ${info.version}`] : []),
        ],
        aliasCombinedTypes: true,
      },
    },
    input: {
      target: "https://builds.flathub.org/openapi.json",
    },
  },
})
